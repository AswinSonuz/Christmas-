<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Merry Christmas üéÑ | AswinSonuzz</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;500;700&display=swap" rel="stylesheet">

<style>
*{margin:0;padding:0;box-sizing:border-box;font-family:Poppins}

body{
  background:radial-gradient(circle at top,#1b2735,#090a0f);
  color:#fff;
  min-height:100vh;
  text-align:center;
  transition:background .6s;
}

body.christmas{
  background:radial-gradient(circle at top,#060b12,#000);
}

.container{max-width:900px;margin:auto;padding:30px 20px}

.card{
  background:rgba(255,255,255,.08);
  backdrop-filter:blur(14px);
  border-radius:22px;
  padding:30px;
  margin-bottom:25px;
  transition:box-shadow .4s;
}

body.christmas .card{
  box-shadow:
    0 0 30px rgba(255,77,77,.25),
    inset 0 0 20px rgba(255,255,255,.05);
}

h1 span{color:#ff5252}

button{
  background:linear-gradient(135deg,#ff416c,#ff4b2b);
  border:none;
  padding:12px 28px;
  border-radius:40px;
  color:#fff;
  cursor:pointer;
  margin:8px;
}

input{
  padding:10px 15px;
  border-radius:30px;
  border:none;
}

.game{
  height:220px;
  border:2px dashed rgba(255,255,255,.4);
  border-radius:16px;
  position:relative;
  overflow:hidden;
}

.gift{position:absolute;font-size:2.2rem;cursor:pointer}

/* SWITCH */
.switch{
  width:70px;height:36px;
  background:#555;border-radius:50px;
  position:relative;margin:auto;
  cursor:pointer;
}
.switch::after{
  content:"";
  width:30px;height:30px;
  background:#fff;
  border-radius:50%;
  position:absolute;
  top:3px;left:4px;
  transition:.3s;
}
.switch.on{background:#ff4d4d}
.switch.on::after{left:36px}

/* LEADERBOARD */
.leaderboard li{
  list-style:none;
  padding:6px;
  border-bottom:1px solid rgba(255,255,255,.1)
}

/* CHRISTMAS LIGHTS */
.lights{
  position:fixed;
  top:0;
  left:0;
  width:100%;
  height:140px;
  display:none;
  z-index:3;
  pointer-events:none;
}
.wire{
  position:absolute;
  top:45px;
  width:100%;
  height:2px;
  background:rgba(255,255,255,.2);
}
.light{
  width:14px;
  height:14px;
  position:absolute;
  top:53px;
  animation:flicker 2s infinite alternate,
           swing 3s ease-in-out infinite;
}
.round{border-radius:50%}
.heart{
  background:red;
  transform:rotate(45deg);
}
.heart::before,
.heart::after{
  content:"";
  width:14px;height:14px;
  background:red;
  border-radius:50%;
  position:absolute;
}
.heart::before{top:-7px;left:0}
.heart::after{left:-7px;top:0}

@keyframes flicker{from{opacity:.5}to{opacity:1}}
@keyframes swing{0%{transform:rotate(0)}50%{transform:rotate(2deg)}100%{transform:rotate(0)}}

canvas{max-width:100%}
footer{opacity:.7;margin:20px 0}
</style>
</head>

<body>

<div class="lights" id="lights"></div>

<div class="container">

<div class="card">
<h1>Merry Christmas üéÑ<br><span>from AswinSonuzz</span></h1>
<input id="name" placeholder="Enter your name">
<br>
<button onclick="saveName()">Continue üéÅ</button>
<p id="wish"></p>
</div>

<div class="card">
<h3>üéÑ Christmas Mode</h3>
<div class="switch" id="themeSwitch" onclick="toggleTheme()"></div>
</div>

<div class="card">
<h3>üéÆ Catch the Gift</h3>
<div class="game" id="game"></div>
<p>Score: <span id="score">0</span></p>
</div>

<div class="card">
<h3>üèÜ Leaderboard</h3>
<ul class="leaderboard" id="board"></ul>
</div>

<div class="card">
<h3>üì∏ Christmas Camera</h3>
<video id="video" autoplay playsinline width="100%"></video>
<br>
<button onclick="takePhoto()">Capture üéÑ</button>
<canvas id="photo"></canvas>
<br>
<button onclick="savePhoto()">Save to Gallery</button>
</div>

<div id="dilnaOnly" style="display:none">
<div class="card">
<h3>‚ù§Ô∏è Special for You</h3>
<button onclick="sendMail()">Send Christmas Hug ü§ó</button>
</div>
</div>

<button onclick="mute()">üîá Mute Music</button>

<footer>Crafted with ‚ù§Ô∏è by AswinSonuzz</footer>

</div>

<audio id="music" loop>
<source src="https://www.soundhelix.com/examples/mp3/SoundHelix-Song-1.mp3">
</audio>

<audio id="click">
<source src="https://www.soundjay.com/switch/switch-1.mp3">
</audio>

<audio id="jingle">
<source src="https://www.soundjay.com/bell/sounds/jingle-bell-1.mp3">
</audio>

<script>
/* MUSIC AUTOPLAY FIX */
const music=document.getElementById("music");
let musicStarted=false;
document.addEventListener("click",()=>{
  if(!musicStarted){
    music.play();
    musicStarted=true;
  }
},{once:true});

function mute(){music.muted=true}

/* STORAGE */
let player=localStorage.getItem("player")||"";
let scores=JSON.parse(localStorage.getItem("scores")||"{}");
document.getElementById("name").value=player;

const crushNames=["dilna","dillu","dilu"];

/* SAVE NAME */
function saveName(){
  player=document.getElementById("name").value.trim();
  localStorage.setItem("player",player);

  if(crushNames.includes(player.toLowerCase())){
    document.getElementById("wish").innerText=
      "‚ù§Ô∏è You are very special to me this Christmas.";
    document.getElementById("dilnaOnly").style.display="block";
  }else{
    document.getElementById("wish").innerText=
      "üéÑ Wishing you joy & warmth!";
  }
  createLights();
}

/* GAME */
let score=0;
const game=document.getElementById("game");

function spawn(){
 game.innerHTML="";
 const g=document.createElement("div");
 g.className="gift";
 g.innerText="üéÅ";
 g.style.left=Math.random()*80+"%";
 g.style.top=Math.random()*70+"%";
 g.onclick=()=>{
   score++;
   document.getElementById("score").innerText=score;
   scores[player]=Math.max(scores[player]||0,score);
   localStorage.setItem("scores",JSON.stringify(scores));
   updateBoard();
   spawn();
 };
 game.appendChild(g);
}
spawn();

/* LEADERBOARD */
function updateBoard(){
 const list=document.getElementById("board");
 list.innerHTML="";
 Object.entries(scores)
 .sort((a,b)=>b[1]-a[1])
 .forEach(([n,s])=>{
   const li=document.createElement("li");
   li.innerText=`${n} ‚Äî ${s}`;
   list.appendChild(li);
 });
}
updateBoard();

/* LIGHTS */
function createLights(){
  const box=document.getElementById("lights");
  box.innerHTML="";
  const wire=document.createElement("div");
  wire.className="wire";
  box.appendChild(wire);

  const isDilna=crushNames.includes(player.toLowerCase());
  const colors=["#ff4d4d","#ffd700","#4dff4d","#4dd2ff"];

  for(let i=0;i<30;i++){
    const l=document.createElement("div");
    l.className="light "+(isDilna?"heart":"round");
    l.style.left=(i*3.3)+"%";
    const c=colors[i%colors.length];
    l.style.background=c;
    l.style.boxShadow=`0 0 18px ${c}`;
    l.style.animationDelay=Math.random()+"s";
    box.appendChild(l);
  }
}

/* THEME */
function toggleTheme(){
  document.getElementById("themeSwitch").classList.toggle("on");
  document.body.classList.toggle("christmas");
  document.getElementById("lights").style.display=
    document.body.classList.contains("christmas")?"block":"none";
  createLights();
  document.getElementById("jingle").play();
  if(navigator.vibrate)navigator.vibrate(40);
}

/* CAMERA */
navigator.mediaDevices.getUserMedia({video:true})
.then(s=>video.srcObject=s);

function takePhoto(){
 const c=document.getElementById("photo");
 const ctx=c.getContext("2d");
 c.width=video.videoWidth;
 c.height=video.videoHeight;
 ctx.drawImage(video,0,0);
 ctx.fillStyle="white";
 ctx.font="30px Poppins";
 ctx.fillText("AswinSonuzz",20,c.height-20);
}

function savePhoto(){
 const link=document.createElement("a");
 link.download="christmas.png";
 link.href=document.getElementById("photo").toDataURL();
 link.click();
}

/* MAIL */
function sendMail(){
 window.location.href=
 "mailto:traswin300@gmail.com?subject=Christmas Hug&body=Merry Christmas ‚ù§Ô∏è";
}
</script>

</body>
</html>